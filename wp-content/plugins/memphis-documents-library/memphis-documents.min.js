function mdocs_wp(){jQuery("body").addClass("memphis-documents-library"),"function"==typeof jQuery.fn.tooltip&&jQuery('[data-toggle="tooltip"]').tooltip(),mdocs_add_update_documents(),mdocs_toogle_description_preview(),mdocs_description_preview(),mdocs_file_preview(),mdocs_image_preview(),mdocs_ratings(),mdocs_sort_files(),mdocs_submit_rating("small"),mdocs_share_modal(),mdocs_toggle_modals(),mdocs_toggle_dropdown_menu(),mdocs_versions(),mdocs_debug_active()}function mdocs_admin(){"object"==typeof tinyMCE&&tinyMCE.init({remove_linebreaks:!1}),jQuery(document).on("focusin",function(e){e.stopImmediatePropagation()}),mdocs_modal_close(),mdocs_color_pickers(),mdocs_toogle_disable_setting("#mdocs-hide-all-files","#mdocs-hide-all-files-non-members"),mdocs_toogle_disable_setting("#mdocs-hide-all-files-non-members","#mdocs-hide-all-files"),mdocs_toogle_disable_setting("#mdocs-hide-all-posts","#mdocs-hide-all-posts-non-members"),mdocs_toogle_disable_setting("#mdocs-hide-all-posts-non-members","#mdocs-hide-all-posts"),mdocs_add_update_documents(),mdocs_description_preview(),mdocs_file_preview(),mdocs_image_preview(),mdocs_add_mime_type(),mdocs_remove_mime_type(),mdocs_restore_default_mimes(),mdocs_sort_files(),mdocs_ratings(),mdocs_share_modal(),jQuery("#mdosc-3-0-patch-btn").click(function(e){e.preventDefault(),mdocs_v3_0_patch(Number(jQuery(this).data("num-docs")))}),jQuery(".mdocs-show-social").click(function(){if(jQuery(this).hasClass("fa fa-plus-sign-alt")){jQuery(this).removeClass("fa fa-plus-sign-alt"),jQuery(this).addClass("fa fa-minus-sign-alt");o=(e=(e=jQuery(this).prop("id")).split("-"))[e.length-1];jQuery("#mdocs-social-index-"+o).show()}else{jQuery(this).removeClass("fa fa-minus-sign-alt"),jQuery(this).addClass("icon-plus-sign-alt");var e=jQuery(this).prop("id"),o=(e=e.split("-"))[e.length-1];jQuery("#mdocs-social-index-"+o).hide()}}),jQuery("#mdocs-add-cat").click(function(e){e.preventDefault()}),jQuery('input[id="mdocs-cat-remove"]').click(function(){var e=window.confirm(mdocs_js.category_delete),o=jQuery(this).prop("name");e&&(jQuery('[name="mdocs-cats['+o+'][remove]"]').prop("value",1),jQuery("#mdocs-cats").submit())}),mdocs_box_view_refresh(),mdocs_find_lost_files(),mdocs_toggle_modals(),mdocs_toggle_batch_select_all(),mdocs_activate_batch_options(),mdocs_debug_active(),mdocs_post_page_title_font_size(),mdocs_post_page_settings(),mdocs_folder_editor()}function mdocs_add_update_documents(){jQuery(".add-update-btn").click(function(e){var o=jQuery(this).data("action-type"),t=jQuery(this).data("mdocs-id"),s=jQuery(this).data("current-cat"),c=(jQuery(this).data("nonce"),jQuery(this).data("is-admin"));jQuery.post(mdocs_js.ajaxurl,{action:"mdocs_ajax",type:o,"mdocs-id":t,"current-cat":s,"is-admin":c,_mdocs_ajax_nonce:mdocs_js.mdocs_ajax_nonce},function(e){var c="Add Document",a=JSON.parse(e);null!=a.error?alert(a.error):(jQuery("#mdocs-post-categories option").each(function(){jQuery(this).prop("selected",!1)}),"update-doc"==o?(null!=a["mdocs-categories"]&&jQuery("#mdocs-post-categories option").each(function(){for(i=0;i<a["mdocs-categories"].length;i++)a["mdocs-categories"][i]==jQuery(this).prop("value")&&jQuery(this).prop("selected",!0)}),jQuery("#mdocs-add-update-form").prop("action","admin.php?page=memphis-documents.php&mdocs-cat="+s),jQuery('input[name="mdocs-type"]').prop("value","mdocs-update"),jQuery('input[name="mdocs-index"]').prop("value",t),jQuery('input[name="mdocs-pname"]').prop("value",a.name),jQuery('input[name="mdocs-post-status-sys"]').prop("value",a.post_status),c=mdocs_js.update_doc+" <small>"+a.filename+"</small>",jQuery("#mdocs-current-doc").html(mdocs_js.current_file+": "+a.filename),a.name=a.name.replace(/\\/g,""),a.name=a.name.replace(/&quot;/g,""),jQuery('input[name="mdocs-name"]').prop("value",a.name),jQuery('option[value="'+a.cat+'"]').prop("selected",!0),jQuery('input[name="mdocs-version"]').prop("value",a.version),jQuery('input[name="mdocs-tags"]').prop("value",a["post-tags"]),jQuery('input[name="mdocs-last-modified"]').prop("value",a.gmdate),"on"==a.show_social?jQuery('input[name="mdocs-social"]').prop("checked",!0):jQuery('input[name="mdocs-social"]').prop("checked",!1),"on"==a.non_members?jQuery('input[name="mdocs-non-members"]').prop("checked",!0):jQuery('input[name="mdocs-non-members"]').prop("checked",!1),jQuery("#mdocs-file-status option").each(function(){a.file_status==jQuery(this).val()&&jQuery(this).prop("selected",!0)}),jQuery("#mdocs-post-status option").each(function(){a.post_status==jQuery(this).val()&&jQuery(this).prop("selected",!0)}),jQuery("#mdocs-current-owner").html('<i class="fa fa-user"></i> '+a.owner),jQuery(".mdocs-contributors-container").append('<input type="hidden" value="'+a.owner+'" name="mdocs-owner-value"/>'),mdocs_contributor_editor(a),a.desc=a.desc.replace(/\\/g,""),a.desc=a.desc.replace(/&quot;/g,""),a.desc=a.desc,"object"==typeof tinyMCE&&null!=tinyMCE.activeEditor?tinyMCE.activeEditor.setContent(a.desc):jQuery("#mdocs-desc").text(a.desc),jQuery("#mdocs-save-doc-btn").prop("value",mdocs_js.update_doc_btn),jQuery('input[name="mdocs"]').change(function(){jQuery.post(mdocs_js.ajaxurl,{action:"mdocs_ajax",type:"update-date",_mdocs_ajax_nonce:mdocs_js.mdocs_ajax_nonce},function(e){var o=JSON.parse(e);jQuery('input[name="mdocs-last-modified"]').val(o["formated-date"])})})):(jQuery('input[name="mdocs-name"]').val(""),jQuery('option[value="'+s+'"]').prop("selected",!0),jQuery('input[name="mdocs-version"]').val("1.0"),jQuery("#mdocs-current-doc").html(""),jQuery("#mdocs-current-owner").html('<i class="fa fa-user"></i> '+jQuery('input[name="mdocs-current-user"]').val()),jQuery(".mdocs-contributors-container").append('<input type="hidden" value="'+jQuery('input[name="mdocs-current-user"]').val()+'" id="mdocs-owner-value"/>'),"object"==typeof tinyMCE&&null!=tinyMCE.activeEditor?tinyMCE.activeEditor.setContent(""):jQuery("#mdocs-desc").text(""),jQuery('input[name="mdocs-type"]').prop("value","mdocs-add"),jQuery('input[name="mdocs-last-modified"]').prop("value",a.gmdate),mdocs_contributor_editor(a),c=mdocs_js.add_doc,jQuery("#mdocs-save-doc-btn").prop("value",mdocs_js.add_doc_btn)),jQuery("#mdocs-add-update-header").html(c))})})}function mdocs_contributor_editor(e){jQuery('button[id^="mdocs-contributors["]').each(function(){jQuery(this).remove()}),jQuery('input[name^="mdocs-contributors["]').each(function(){jQuery(this).remove()}),null==e.contributors&&(e.contributors={});var o=e.contributors;for(var t in o)o.hasOwnProperty(t)&&(jQuery(".mdocs-contributors-container").append(' <button type="button" class="btn btn-success" id="mdocs-contributors['+t+']" data-index="'+t+'"><i class="fa fa-user"></i> '+e.contributors[t]+' <i class="fa fa-times mdocs-contributors-delete-btn" id="mdocs-contributors-delete[mdocs-contributors['+t+']]"></i></span>'),jQuery(".mdocs-contributors-container").append('<input type="hidden" value="'+e.contributors[t]+'" name="mdocs-contributors['+t+']"/>'));activate_contributors_delete_btn(),jQuery(".mdocs-add-contributors").focusout(function(){jQuery(this).prop("value","")}),jQuery(".mdocs-add-contributors").keyup(function(){if(jQuery(this).val().length>1){var e=jQuery(this).parent().data("mdocs-index"),o=[];jQuery('input[name^="mdocs-contributors"], input[name^="mdocs-batch-edit['+e+']"]').each(function(){o.push(jQuery(this).val())}),jQuery(this).parent().children(".mdocs-user-search-list").removeClass("hidden"),jQuery.post(mdocs_js.ajaxurl,{action:"mdocs_ajax",type:"search-users","user-search-string":jQuery(this).val(),owner:jQuery('input[name="mdocs-owner-value"]').val(),contributors:o,_mdocs_ajax_nonce:mdocs_js.mdocs_ajax_nonce},function(e){jQuery(".mdocs-user-search-list").html(e),jQuery(".mdocs-search-results-roles, .mdocs-search-results-users").click(function(e){e.preventDefault();var o=jQuery(this).parent().parent().parent().children(".mdocs-contributors-container"),s=jQuery(this).parent().parent().parent().data("contributor-type");if("add-update"==s)o.append(' <button type="button" class="btn btn-success" id="mdocs-contributors['+t+']" data-index="'+t+'"><i class="fa fa-user"></i> '+jQuery(this).data("value")+' <i class="fa fa-times mdocs-contributors-delete-btn" id="mdocs-contributors-delete[mdocs-contributors['+t+']]"></i></button>'),o.append('<input type="hidden" name="mdocs-contributors['+t+']" value="'+jQuery(this).data("value")+'" />'),t++;else if("batch-edit"==s){var c=o.data("mdocs-index"),a=o.children().last().data("contributor-index");void 0==a?a=0:a+=1,o.append('<input type="hidden" name="mdocs-batch-edit['+c+"][contributors]["+a+']" value="'+jQuery(this).data("value")+'" >'),o.append('<button type="button" class="btn btn-sm btn-success" data-mdocs-index="'+c+'" data-contributor-index="'+a+'"><i class="fa fa-user"></i> '+jQuery(this).data("value")+' <i class="fa fa-times mdocs-contributors-delete-btn" ></i></button>')}jQuery(".mdocs-add-contributors").val(""),jQuery(".mdocs-user-search-list").html(""),jQuery(".mdocs-user-search-list").addClass("hidden"),activate_contributors_delete_btn()})})}else jQuery(".mdocs-user-search-list").addClass("hidden"),jQuery(".mdocs-user-search-list").html()})}function activate_contributors_delete_btn(){jQuery(".mdocs-contributors-delete-btn").click(function(){var e=jQuery(this).parent().data("index"),o=jQuery(this).parent().data("mdocs-index"),t=jQuery(this).parent().data("contributor-index");jQuery(this).parent().remove(),jQuery('input[name="mdocs-contributors['+e+']"]').remove(),jQuery('input[name="mdocs-batch-edit['+o+"][contributors]["+t+']"]').remove()})}function add_main_category(e){mdocs_add_sub_cat(e,"",0,jQuery("#the-list"),!0)}function mdocs_color_pickers(){var e=jQuery("#bg-color-mdocs-picker").prop("value"),o=jQuery("#bg-hover-color-mdocs-picker").prop("value"),t=jQuery("#bg-text-color-mdocs-picker").prop("value"),s=jQuery("#bg-text-hover-color-mdocs-picker").prop("value"),c=jQuery('input[name="mdocs-navbar-bgcolor"]').prop("value"),a=jQuery('input[name="mdocs-navbar-bordercolor"]').prop("value"),d=jQuery("#navbar-text-color-normal-mdocs-picker").prop("value"),n=jQuery("#navbar-text-color-hover-mdocs-picker").prop("value"),r={change:function(r,i){var m=jQuery(this).prop("id");"bg-color-mdocs-picker"==m?(e=i.color.toString(),jQuery(".mdocs-download-btn-config").css("background",e)):"bg-hover-color-mdocs-picker"==m&&(o=i.color.toString()),"bg-text-color-mdocs-picker"==m?(t=i.color.toString(),jQuery(".mdocs-download-btn-config").css("color",t)):"bg-text-hover-color-mdocs-picker"==m&&(s=i.color.toString()),"navbar-bg-color-mdocs-picker"==m&&(c=i.color.toString(),jQuery(".mdocs-navbar-default-config").css("background",c)),"navbar-border-color-mdocs-picker"==m&&(a=i.color.toString(),jQuery(".mdocs-navbar-default-config").css("border-color",a)),"navbar-text-color-normal-mdocs-picker"==m?(d=i.color.toString(),jQuery(".mdocs-navbar-a-config").css("color",d)):"navbar-text-color-hover-mdocs-picker"==m&&(n=i.color.toString())}};"function"==typeof jQuery(".mdocs-color-picker").wpColorPicker&&(jQuery(".mdocs-color-picker").wpColorPicker(r),jQuery('[id$="mdocs-picker"]').wpColorPicker(r)),jQuery(".mdocs-download-btn-config").hover(function(){jQuery(this).css("background",o),jQuery(this).css("color",s)},function(){jQuery(this).css("background",e),jQuery(this).css("color",t)}),jQuery(".mdocs-navbar-a-config").hover(function(){jQuery(this).css("color",n)},function(){jQuery(this).css("color",d)})}function mdocs_restore_default_mimes(){jQuery("#mdocs-restore-default-file-types").click(function(e){e.preventDefault(),jQuery.post(mdocs_js.ajaxurl,{action:"mdocs_ajax",type:"restore-mime",is_admin:!0,_mdocs_ajax_nonce:mdocs_js.mdocs_ajax_nonce},function(e){jQuery(".mdocs-mime-table").html(e),mdocs_remove_mime_type(),mdocs_add_mime_type()})})}function mdocs_add_mime_type(){jQuery("#mdocs-add-mime").click(function(e){e.preventDefault();var o=jQuery('input[name="mdocs-file-extension"]').val(),t=jQuery('input[name="mdocs-mime-type"]').val();jQuery.post(mdocs_js.ajaxurl,{action:"mdocs_ajax",type:"add-mime",file_extension:o,mime_type:t,is_admin:!0,_mdocs_ajax_nonce:mdocs_js.mdocs_ajax_nonce},function(e){jQuery(e).insertBefore(".mdocs-mime-submit"),mdocs_remove_mime_type(),jQuery('input[name="mdocs-file-extension"]').val(""),jQuery('input[name="mdocs-mime-type"]').val("")})})}function mdocs_remove_mime_type(){jQuery(".mdocs-remove-mime").click(function(e){e.preventDefault();var o=jQuery(this).parent().parent().data("file-type");jQuery(this).parent().parent().remove(),jQuery.post(mdocs_js.ajaxurl,{action:"mdocs_ajax",type:"remove-mime",file_extension:o,is_admin:!0,_mdocs_ajax_nonce:mdocs_js.mdocs_ajax_nonce},function(e){})})}function mdocs_add_sub_cat(e,o,t,s,c){jQuery.post(mdocs_js.ajaxurl,{action:"mdocs_ajax",type:"mdocs-cat-index","check-index":jQuery("#mdocs-cats").data("check-index"),_mdocs_ajax_nonce:mdocs_js.mdocs_ajax_nonce},function(a){var d=parseInt(a),n=d+1;jQuery("#mdocs-cats").data("cat-index",d),jQuery("#mdocs-cats").data("check-index",n);var r=parseInt(t)+1,i='class="mdocs-cats-tr"';if(r<=mdocs_js.levels){jQuery('input[name="mdocs-update-cat-index"]').val(add_button_clicks++);var m='style="padding-left: '+40*r+'px; "';0==d?d=parseInt(e)+1:d++;var u=parseInt(jQuery('input[name="mdocs-cats['+o+'][num_children]"]').val())+1,l="";if(jQuery('input[name="mdocs-cats['+o+'][num_children]"]').val(u),c&&(m=0,u=jQuery(".wp-list-table > tbody > tr").size()+1,l="",r=0,i='class="mdocs-cats-tr parent-cat"'),void 0!=jQuery('input[name="mdocs-cats['+o+'][index]"]').val())p=jQuery('input[name="mdocs-cats['+o+'][index]"]').val();else var p=0;var _="\t\t<tr "+i+'>\t\t    <td  id="name" '+m+' >\t\t       <input type="hidden" name="mdocs-cats[mdocs-cat-'+(d=jQuery("#mdocs-cats").data("cat-index"))+'][index]" value="'+d+'"/>\t\t\t<input type="hidden" name="mdocs-cats[mdocs-cat-'+d+'][parent_index]" value="'+p+'"/>\t\t\t<input type="hidden" name="mdocs-cats[mdocs-cat-'+d+'][num_children]" value="0" />\t\t\t<input type="hidden" name="mdocs-cats[mdocs-cat-'+d+'][depth]" value="'+r+'"/>\t\t\t<input type="hidden" name="mdocs-cats[mdocs-cat-'+d+'][parent]" value="'+o+'"/>\t\t\t<input type="hidden" name="mdocs-cats[mdocs-cat-'+d+'][slug]" value="mdocs-cat-'+d+'" />\t\t\t<input type="text" name="mdocs-cats[mdocs-cat-'+d+'][name]"  value="'+mdocs_js.new_category+'"  />\t\t    </td>\t\t    <td id="order">\t\t\t<input  type="text" name="mdocs-cats[mdocs-cat-'+d+'][order]"  value="'+u+'" '+l+' />\t\t    </td>\t\t    <td id="remove">\t\t\t    <input type="hidden" name="mdocs-cats[mdocs-cat-'+d+'][remove]" value="0"/>\t\t\t    <input type="button" id="mdocs-sub-cats-remove-new-'+d+'" class="btn btn-primary" value="Remove"  />\t\t    </td>\t\t    <td id="add-cat">\t\t\t<input type="button" class="mdocs-add-sub-cat btn btn-primary" id="mdocs-sub-cats-add-new-'+d+'" value="'+mdocs_js.add_folder+'""   />\t\t    </td>\t\t</tr>\t\t';"the-list"==jQuery(s).prop("id")?jQuery(s).append(_):jQuery(_).insertAfter(jQuery(s).parent().parent()),jQuery('input[id="mdocs-sub-cats-remove-new-'+d+'"]').click(function(){jQuery('input[name="mdocs-cats['+o+'][num_children]"]').val(u-1),jQuery(this).parent().parent().remove()}),jQuery('input[id="mdocs-sub-cats-add-new-'+d+'"]').click(function(){var e=jQuery(this).prop("id").split("-");e=e[e.length-1];jQuery('input[name="mdocs-cats[mdocs-cat-'+e+'][parent]"]').val();var o=jQuery('input[name="mdocs-cats[mdocs-cat-'+e+'][slug]"]').val(),t=jQuery('input[name="mdocs-cats[mdocs-cat-'+e+'][depth]"]').val();mdocs_add_sub_cat(d,o,t,this)})}else alert(mdocs_js.category_support)})}function mdocs_set_onleave(){window.onbeforeunload=function(){return mdocs_js.leave_page}}function mdocs_reset_onleave(){window.onbeforeunload=null}function mdocs_download_zip(e){jQuery("#mdocs-export-container .panel-body").append('<br><div class="alert alert-warning text-center" role="alert" id="mdocs-export-cog"><i class="fa fa-cog fa-2x fa-spin"></i> '+mdocs_js.create_export_file+"</div>"),jQuery("#mdocs-export-submit").addClass("disabled"),jQuery.post(mdocs_js.ajaxurl,{action:"mdocs_ajax",type:"mdocs-export","zip-file":e,_mdocs_ajax_nonce:mdocs_js.mdocs_ajax_nonce},function(o){var t={};jQuery.each(jQuery("#mdocs-export").serializeArray(),function(){t[this.name.replace(/-/g,"_")]=this.value}),jQuery("#mdocs-export-cog").html(mdocs_js.export_creation_complete_starting_download),jQuery("#mdocs-export-cog").delay(3e3).fadeOut(1e3,function(){jQuery("#mdocs-export-cog").remove(),jQuery("#mdocs-export-submit").removeClass("disabled")}),window.location.href="?mdocs-export-file="+e,jQuery.post(mdocs_js.ajaxurl,{action:"mdocs_ajax",type:"mdocs-export-cleanup","mdocs-export-donot-delete":t.mdocs_export_donot_delete,_mdocs_ajax_nonce:mdocs_js.mdocs_ajax_nonce},function(e){})})}function mdocs_download_current_version(e){window.location.href="?mdocs-file="+e}function mdocs_download_version(e,o){window.location.href="?mdocs-file-id="+e+"&mdocs-version="+o}function mdocs_delete_version(e,o,t,s){window.confirm(mdocs_js.version_delete)&&(window.location.href="admin.php?page=memphis-documents.php&mdocs-cat="+t+"&action=delete-version&version-file="+e+"&mdocs-index="+o+"&mdocs-nonce="+s)}function mdocs_delete_file(e,o,t){window.confirm(mdocs_js.version_file)&&(window.location.href="admin.php?page=memphis-documents.php&action=delete-doc&mdocs-index="+e+"&mdocs-cat="+o+"&mdocs-nonce="+t)}function mdocs_download_file(e,o){window.location.href="?mdocs-file="+e+"&mdocs-url=false"}function mdocs_share(e,o,t){0==toggle_share?(jQuery("#"+t+" .mdocs-share-link").remove(),jQuery("#"+t).append('<div class="mdocs-share-link"><br>'),jQuery(".mdocs-share-link").append('<div class="well well-sm"><h3><i class="fa fa-arrow-circle-o-right"></i> Download Page</h3><p>'+e+"</p></div>"),jQuery(".mdocs-share-link").append('<div class="well well-sm"><h3><i class="fa fa-download"></i> Direct Download</h3><p>'+o+"</p></div>"),jQuery(".mdocs-share-link").append("</div>"),toggle_share=!0):(jQuery("#"+t+" .mdocs-share-link").remove(),toggle_share=!1)}function mdocs_toogle_disable_setting(e,o){jQuery(e).prop("checked")?jQuery(o).prop("disabled",!0):jQuery(o).prop("disabled",!1),jQuery(e).click(function(){jQuery(this).prop("checked")?jQuery(o).prop("disabled",!0):jQuery(o).prop("disabled",!1)})}function mdocs_ratings(){jQuery(".ratings-button").click(function(e){jQuery(".mdocs-ratings-body").empty();var o=jQuery(this).data("mdocs-id");jQuery(this).data("is-admin");jQuery.post(mdocs_js.ajaxurl,{action:"mdocs_ajax",type:"rating",mdocs_file_id:o,_mdocs_ajax_nonce:mdocs_js.mdocs_ajax_nonce},function(e){jQuery(".mdocs-ratings-body").html(e),mdocs_submit_rating("large",o)})})}function mdocs_submit_rating(e,o){var t=jQuery(".mdocs-ratings-stars").data("my-rating");if("large"==e)for(e="fa-5x",index=1;index<6;++index)t>=index?jQuery("#"+index).prop("class","fa fa-star "+e+"  mdocs-gold mdocs-my-rating"):jQuery("#"+index).prop("class","fa fa-star-o "+e+" mdocs-my-rating");else e="fa-1x";jQuery(".mdocs-my-rating").click(function(s){"fa-1x"==e&&(o=jQuery(".mdocs-post-header").data("mdocs-id")),t=jQuery(this).prop("id"),jQuery.post(mdocs_js.ajaxurl,{action:"mdocs_ajax",type:"rating-submit",mdocs_file_id:o,"mdocs-rating":t,_mdocs_ajax_nonce:mdocs_js.mdocs_ajax_nonce},function(e){window.location.href=""})}),jQuery(".mdocs-my-rating").mouseover(function(){for(index=1;index<6;++index)this.id>=index?jQuery("#"+index).prop("class","fa fa-star "+e+" mdocs-gold mdocs-my-rating"):jQuery("#"+index).prop("class","fa fa-star-o "+e+" mdocs-my-rating")}),jQuery(".mdocs-rating-container-small, .mdocs-rating-container").mouseout(function(){for(t=jQuery(".mdocs-ratings-stars").data("my-rating"),index=1;index<6;++index)t>=index?jQuery("#"+index).prop("class","fa fa-star "+e+"  mdocs-gold mdocs-my-rating"):jQuery("#"+index).prop("class","fa fa-star-o "+e+" mdocs-my-rating")})}function mdocs_restore_default(){confirm(mdocs_js.restore_warning)&&jQuery.post(mdocs_js.ajaxurl,{action:"mdocs_ajax",type:"restore",blog_id:mdocs_js.blog_id,is_admin:!0,_mdocs_ajax_nonce:mdocs_js.mdocs_ajax_nonce},function(e){window.location.href="admin.php?page=memphis-documents.php"})}function mdocs_description_preview(){jQuery(".description-preview").click(function(e){jQuery(".mdocs-description-preview-body").empty();var o=jQuery(this).data("mdocs-id");jQuery(this).data("is-admin");jQuery.post(mdocs_js.ajaxurl,{action:"mdocs_ajax",type:"desc",mdocs_file_id:o,show_type:"desc",_mdocs_ajax_nonce:mdocs_js.mdocs_ajax_nonce},function(e){jQuery(".mdocs-description-preview-body").html(e)})})}function mdocs_file_preview(){jQuery(".file-preview").click(function(e){jQuery(".mdocs-file-preview-body").empty();var o=jQuery(this).data("mdocs-id");jQuery(this).data("is-admin");jQuery.post(mdocs_js.ajaxurl,{action:"mdocs_ajax",type:"preview",mdocs_file_id:o,show_type:"preview",_mdocs_ajax_nonce:mdocs_js.mdocs_ajax_nonce},function(e){jQuery(".mdocs-file-preview-body").html(e)})})}function mdocs_image_preview(){jQuery(".img-preview").click(function(){jQuery(".mdocs-file-preview-body").empty();var e=jQuery(this).data("mdocs-id");jQuery(this).data("is-admin");jQuery.post(mdocs_js.ajaxurl,{action:"mdocs_ajax",type:"preview",mdocs_file_id:e,show_type:"preview",_mdocs_ajax_nonce:mdocs_js.mdocs_ajax_nonce},function(e){jQuery(".mdocs-file-preview-body").html(e)})})}function mdocs_toogle_description_preview(){jQuery(".mdocs-nav-tab").click(function(e){e.preventDefault(),jQuery(".mdocs-nav-tab").each(function(){jQuery(this).removeClass("mdocs-nav-tab-active")}),jQuery(this).addClass("mdocs-nav-tab-active"),jQuery("#mdocs-show-container-"+o).empty();var o=jQuery(this).data("mdocs-id"),t=jQuery(this).data("mdocs-show-type");jQuery.post(mdocs_js.ajaxurl,{action:"mdocs_ajax",type:"show",show_type:t,mdocs_file_id:o,_mdocs_ajax_nonce:mdocs_js.mdocs_ajax_nonce},function(e){jQuery("#mdocs-show-container-"+o).html(e)})})}function mdocs_sort_files(){jQuery(".mdocs-sort-option").click(function(){if(0==jQuery(this).data("disable-user-sort")){var e=jQuery(this).data("permalink"),o=(jQuery(this).data("current-cat"),jQuery(this).data("sort-type")),t=jQuery(this).children(":first").prop("class");t="fa fa-chevron-down"==t?"asc":"desc",jQuery.post(mdocs_js.ajaxurl,{action:"mdocs_ajax",type:"sort",sort_type:o,sort_range:t,_mdocs_ajax_nonce:mdocs_js.mdocs_ajax_nonce},function(o){window.location.href=e})}})}function mdocs_check_width(){jQuery("#mdocs-navbar").width()<600&&0==is_collapsed||jQuery("#mdocs-navbar").width()<600&&null==is_collapsed?(is_collapsed=!0,jQuery("#mdocs-nav-expand").remove(),jQuery.post(mdocs_js.ajaxurl,{action:"mdocs_ajax",type:"nav-collaspse",_mdocs_ajax_nonce:mdocs_js.mdocs_ajax_nonce},function(e){jQuery("head").append(e)})):(jQuery("#mdocs-navbar").width()>600&&1==is_collapsed||jQuery("#mdocs-navbar").width()>600&&null==is_collapsed)&&(is_collapsed=!1,jQuery("#mdocs-nav-collapse").remove(),jQuery.post(mdocs_js.ajaxurl,{action:"mdocs_ajax",type:"nav-expand",_mdocs_ajax_nonce:mdocs_js.mdocs_ajax_nonce},function(e){jQuery("head").append(e)}))}function mdocs_share_modal(){jQuery(".sharing-button").click(function(){jQuery(".mdocs-share-body").empty(),jQuery(".mdocs-share-body").html("<h1>"+mdocs_js.sharing+"</h1>"),jQuery(".mdocs-share-body").append('<div class="well well-sm"><h3><i class="fa fa-arrow-circle-o-right"></i> '+mdocs_js.download_page+"</h3><p>"+jQuery(this).data("permalink")+"</p></div>"),jQuery(".mdocs-share-body").append('<div class="well well-sm"><h3><i class="fa fa-download"></i> '+mdocs_js.direct_download+"</h3><p>"+jQuery(this).data("download")+"</p></div>"),jQuery.post(mdocs_js.ajaxurl,{action:"mdocs_ajax",type:"show-social","doc-id":jQuery(this).data("doc-id"),_mdocs_ajax_nonce:mdocs_js.mdocs_ajax_nonce},function(e){jQuery(".mdocs-share-body").append(e),function(e,o,t){var s,c=e.getElementsByTagName(o)[0];/^http:/.test(e.location);e.getElementById(t)||((s=e.createElement(o)).id=t,s.src="//platform.twitter.com/widgets.js",c.parentNode.insertBefore(s,c))}(document,"script","twitter-wjs"),jQuery.getScript("http://platform.twitter.com/widgets.js"),function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="//apis.google.com/js/plusone.js";var o=document.getElementsByTagName("script")[0];o.parentNode.insertBefore(e,o)}(),window.fbAsyncInit=function(){FB.init({xfbml:!0,version:"v2.4"})},function(e,o,t){var s,c=e.getElementsByTagName(o)[0];e.getElementById(t)||((s=e.createElement(o)).id=t,s.src="//connect.facebook.net/en_US/sdk.js",c.parentNode.insertBefore(s,c))}(document,"script","facebook-jssdk"),FB.XFBML.parse(),jQuery(".mdocs-share-body").append('<div id="fb-root"></div>');jQuery(".linkedinDetail").html('<script id="holderLink" type="IN/Share" data-url="" data-counter="right"><\/script>'),IN.parse()})})}function mdocs_v3_0_patch(e){if("object"==typeof mdocs_js)o=mdocs_js;else var o=mdocs_patch_js;jQuery.post(o.ajaxurl,{action:"mdocs_ajax",type:"mdocs-v3-0-patch",_mdocs_ajax_nonce:mdocs_js.mdocs_ajax_nonce},function(e){jQuery("body").append(e),jQuery("#run-updater-3-0").click(function(){jQuery(".container-3-0").html('\t\t<div class="btn-container-3-0">\t\t    <h3>'+o.patch_text_3_0_1+'</h3>\t\t    <h1><i class="fa fa-spinner fa-pulse fa-3x"></i></h1>\t\t    <h2>'+o.patch_text_3_0_2+"</h2>\t\t</div>\t\t"),jQuery.post(o.ajaxurl,{action:"mdocs_ajax",type:"mdocs-v3-0-patch-run-updater",_mdocs_ajax_nonce:mdocs_js.mdocs_ajax_nonce},function(e){window.location.href=""})}),jQuery("#not-now-3-0").click(function(){jQuery.post(o.ajaxurl,{action:"mdocs_ajax",type:"mdocs-v3-0-patch-cancel-updater",_mdocs_ajax_nonce:mdocs_js.mdocs_ajax_nonce},function(e){jQuery("html, body").css("overflowY","auto"),jQuery(".bg-3-0").remove(),jQuery(".container-3-0").remove()})})})}function mdocs_find_lost_files(){jQuery("#mdocs-find-lost-file-start").click(function(){jQuery("#mdocs-find-lost-file-start").addClass("disabled"),jQuery("#mdocs-find-lost-files-results").html('<br><i class="fa fa-refresh fa-spin fa-1x fa-fw"></i>'),jQuery.post(mdocs_js.ajaxurl,{action:"mdocs_ajax",type:"lost-file-search-start",_mdocs_ajax_nonce:mdocs_js.mdocs_ajax_nonce},function(e){jQuery("#mdocs-find-lost-file-start").removeClass("disabled"),jQuery("#mdocs-find-lost-files-results").html(e),mdocs_find_lost_files_save()})})}function mdocs_find_lost_files_save(){jQuery("#mdocs-find-lost-files-save").submit(function(e){jQuery("#mdocs-find-lost-files-save-btn").addClass("disabled"),e.preventDefault();var o=jQuery(this).serialize();jQuery.post(mdocs_js.ajaxurl,{action:"mdocs_ajax",type:"lost-file-save","form-data":o,_mdocs_ajax_nonce:mdocs_js.mdocs_ajax_nonce},function(e){jQuery("#mdocs-find-lost-files-results").html(e)})})}function mdocs_box_view_refresh(){jQuery(".box-view-refresh-button").click(function(){var e=jQuery(this).data("filename"),o=jQuery(this).data("index");jQuery.post(mdocs_js.ajaxurl,{action:"mdocs_ajax",type:"box-view-refresh",filename:e,index:o,_mdocs_ajax_nonce:mdocs_js.mdocs_ajax_nonce},function(e){jQuery(".mdocs-container").append(e),jQuery("#box-view-updated").delay(3e3).fadeOut(400,function(){jQuery("#box-view-updated").remove()})})})}function mdocs_modal_close(){jQuery(".modal").on("hidden.bs.modal",function(){jQuery(".mdocs-modal-body").empty()})}function mdocs_toggle_modals(){jQuery("body").on("click.collapse-next.data-api","[data-toggle=mdocs-modal]",function(e){e.preventDefault();var o={},t=jQuery(this).data("target");jQuery(t).modal(o)})}function mdocs_toggle_dropdown_menu(){mdocs_js.dropdown_toggle_fix&&(jQuery(".mdocs-title-href").focusout(function(){jQuery(this).next().delay(30).fadeOut(100)}),jQuery(".mdocs-title-href").click(function(e){var o=jQuery(this).data("mdocs-id");jQuery(".mdocs-title-href").each(function(e){jQuery(this).data("mdocs-id")!=o&&jQuery(this).next().fadeOut(100)}),e.preventDefault(),jQuery(this).focus(),jQuery(this).next().fadeIn(100)}))}function mdocs_toggle_batch_select_all(){jQuery('input[name="mdocs-batch-select-all"]').click(function(e){var o=jQuery(this).prop("checked");jQuery('input[name="mdocs-batch-checkbox"]').each(function(e){jQuery(this).prop("checked",o)})})}function mdocs_activate_batch_options(){jQuery('input[name="mdocs-batch-checkbox"]').click(function(e){var o=!1;jQuery('input[name="mdocs-batch-checkbox"]').each(function(e){jQuery(this).prop("checked")&&(o=!0)})})}function mdocs_batch_edit(){var e=[];jQuery('input[name="mdocs-batch-checkbox"]').each(function(o){jQuery(this).prop("checked")&&e.push(jQuery(this).data("id"))});var o=JSON.stringify(e);jQuery.post(mdocs_js.ajaxurl,{action:"mdocs_ajax",type:"batch-edit",ids:o,_mdocs_ajax_nonce:mdocs_js.mdocs_ajax_nonce},function(e){jQuery(".mdocs-batch-edit-body").empty(),jQuery(".mdocs-batch-edit-body").html(e);var o={};o.contributors=null,mdocs_contributor_editor(o)})}function mdocs_batch_edit_save(){var e=jQuery("#mdocs-batch-edit-form").serialize();jQuery.post(mdocs_js.ajaxurl,{action:"mdocs_ajax",type:"batch-edit-save",data:e,_mdocs_ajax_nonce:mdocs_js.mdocs_ajax_nonce},function(e){location.reload()})}function mdocs_batch_move(){var e=[];jQuery('input[name="mdocs-batch-checkbox"]').each(function(o){jQuery(this).prop("checked")&&e.push(jQuery(this).data("id"))});var o=JSON.stringify(e);jQuery.post(mdocs_js.ajaxurl,{action:"mdocs_ajax",type:"batch-move",ids:o,_mdocs_ajax_nonce:mdocs_js.mdocs_ajax_nonce},function(e){jQuery(".mdocs-batch-move-body").empty(),jQuery(".mdocs-batch-move-body").html(e)})}function mdocs_batch_move_save(){var e=jQuery("#mdocs-batch-move-form").serialize();jQuery.post(mdocs_js.ajaxurl,{action:"mdocs_ajax",type:"batch-move-save",data:e,_mdocs_ajax_nonce:mdocs_js.mdocs_ajax_nonce},function(e){location.reload()})}function mdocs_batch_delete(){var e=[];jQuery('input[name="mdocs-batch-checkbox"]').each(function(o){jQuery(this).prop("checked")&&e.push(jQuery(this).data("id"))});var o=JSON.stringify(e);jQuery.post(mdocs_js.ajaxurl,{action:"mdocs_ajax",type:"batch-delete",ids:o,_mdocs_ajax_nonce:mdocs_js.mdocs_ajax_nonce},function(e){jQuery(".mdocs-batch-delete-body").empty(),jQuery(".mdocs-batch-delete-body").html(e)})}function mdocs_batch_delete_save(){var e=jQuery("#mdocs-batch-delete-form").serialize();jQuery.post(mdocs_js.ajaxurl,{action:"mdocs_ajax",type:"batch-delete-save",data:e,_mdocs_ajax_nonce:mdocs_js.mdocs_ajax_nonce},function(e){location.reload()})}function mdocs_versions(){jQuery(".versions-button").click(function(e){var o=jQuery(this).data("mdocs-id");jQuery.post(mdocs_js.ajaxurl,{action:"mdocs_ajax",type:"versions","mdocs-id":o,_mdocs_ajax_nonce:mdocs_js.mdocs_ajax_nonce},function(e){jQuery(".mdocs-versions-body").html(e)})})}function mdocs_debug_active(){mdocs_js.mdocs_debug&&jQuery(".mdoc-navbar-container, .mdocs-post").prepend('<div class="alert alert-danger text-center" role="alert" >'+mdocs_js.mdocs_debug_text+"</div>")}function mdocs_post_page_title_font_size(){1==jQuery('input[name="mdocs-override-post-title-font-size"]').prop("checked")&&jQuery("#mdocs-post-title-font-size").prop("disabled",!1),jQuery('input[name="mdocs-override-post-title-font-size"]').change(function(){1==jQuery(this).prop("checked")?jQuery("#mdocs-post-title-font-size").prop("disabled",!1):jQuery("#mdocs-post-title-font-size").prop("disabled",!0)})}function mdocs_post_page_settings(){jQuery("#mdocs-show-description").change(function(){0==jQuery(this).is(":checked")?(jQuery("#mdocs-post-content-description").prop("disabled",!0),jQuery("#mdocs-post-content-description").prop("selected",!1)):jQuery("#mdocs-post-content-description").prop("disabled",!1)}),jQuery("#mdocs-show-preview").change(function(){0==jQuery(this).is(":checked")?(jQuery("#mdocs-post-content-preview").prop("disabled",!0),jQuery("#mdocs-post-content-preview").prop("selected",!1)):jQuery("#mdocs-post-content-preview").prop("disabled",!1)}),jQuery("#mdocs-show-versions").change(function(){0==jQuery(this).is(":checked")?(jQuery("#mdocs-post-content-versions").prop("disabled",!0),jQuery("#mdocs-post-content-versions").prop("selected",!1)):jQuery("#mdocs-post-content-versions").prop("disabled",!1)})}function mdocs_folder_editor(){"function"==typeof jQuery.fn.tooltip&&jQuery('[data-toggle="tooltip"]').tooltip()}var toggle_share=!1,add_button_clicks=1;is_collapsed=null;